<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Content Manager</title>
    
    
  </head>

  <body>
  	
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
	<link href="/admin/config.yml" type="text/yaml" rel="cms-config-url">
    <!--<script src="/admin/preview-templates.js"></script>-->
    
<script>
// https://decapcms.org/docs/customization/

/*
var CardPreview = this.props.widgetsFor('authors').map(function(author, index) {
        return h('div', {key: index},
          h('hr', {}),
          h('strong', {}, author.getIn(['data', 'name'])),
          author.getIn(['widgets', 'description'])
        );
      })
    );
*/
var HomePreview = createClass({
	render: function() {
		var entry = this.props.entry;
    var title = entry.getIn(['data', 'title']);
    var body = this.props.widgetFor('body');
    console.log(entry)
    //getIn({ x: { y: { z: 123 }}}, ['x', 'y', 'z'])
    const honorific = entry.getIn(['data', 'card', 'honorific'], "not set" );
    const name = entry.getIn(['data', 'card', 'name'], "not set" );
    const portrait = entry.getIn(['data', 'card', 'portrait'], "not set" );
    const position = entry.getIn(['data', 'card', 'position'], "not set" );
      	
    return h('div', {className: 'container'},
      h('h1', {style: {color: 'red'}}, title || 'Default Title'),
      h('div', {className: 'card'}, 
        h('h2', {className: 'text-3xl font-bold underline'}, `${honorific} ${name}`),
        h('div', {className: 'portrait'}, portrait),
        h('div', {className: 'title'}, position),
        h('div', {className: 'time'}, "0:00")
      ),
      h('div', {className: 'content bio'}, body)
    );
	}
});

CMS.registerPreviewTemplate('_index', HomePreview);
CMS.registerPreviewStyle('/css/main.css');

</script>
</html>